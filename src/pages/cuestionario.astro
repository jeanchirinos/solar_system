---
import Header from '@/components/Header.astro'
import Layout from '@/layouts/Layout.astro'
import { getQuestions } from '@/api/getQuestions'

const { questions } = await getQuestions()

// if (Astro.request.method === "POST") {
//   try {
//     const data = await Astro.request.formData();
//     const name = data.get("username");
//     const email = data.get("email");
//     const password = data.get("password");
//     // Do something with the data
//   } catch (error) {
//     if (error instanceof Error) {
//       console.error(error.message);
//     }
//   }
// }
---

<Layout>
  <Header />
  <main class='mx-auto w-[1600px] max-w-full px-4 py-10'>
    <h2 class='mb-4 text-2xl font-bold'>Cuestionario</h2>
    <form method='POST' class='space-y-5'>
      <ul class='list-decimal space-y-6 pl-4'>
        {
          questions.map(question => (
            <li>
              <span class='block'>{question.question}</span>
              {question.options.map(option => (
                <label class='flex gap-x-2'>
                  <input type='radio' name={question.id.toString()} value={option.id} />
                  <span class='text-neutral-300'>{option.option}</span>
                </label>
              ))}
            </li>
          ))
        }
      </ul>

      <button class='w-36 max-w-full rounded-lg bg-white py-1 text-black hover:opacity-85'
        >Enviar</button
      >
    </form>
  </main>
</Layout>
